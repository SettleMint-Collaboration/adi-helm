# ADI Stack testnet deployment (Sepolia)
#
# Usage:
#   helm install adi-stack ./adi-stack \
#     -f examples/values-testnet.yaml \
#     -f examples/values-cloud-aws.yaml \
#     -f examples/values-performance-medium.yaml

# Erigon L1 node - use Sepolia for testnet
erigon:
  chain: sepolia
  caplin:
    checkpointSyncUrl: "https://sepolia.beaconstate.info/eth/v2/debug/beacon/states/finalized"
  persistence:
    # -- Enable persistent storage
    enabled: true
    # -- Storage size (500Gi works for testnet/minimal, increase for mainnet full/archive)
    size: 2Ti

# Genesis configuration - REQUIRED
# mainNodeRpcUrl is the sequencer endpoint that external nodes proxy transactions to.
# Without this, external nodes return "Transaction submission not implemented"
genesis:
  bridgehubAddress: "0xFd3cE61C65dDd1039e6e9e07FB6D6e16388d1cc7"
  bytecodeSupplierAddress: "0x101488dfea56c4443476d29a230dcc1ab340be10"
  chainId: "99999"
  file: "genesis/testnet.json"
  mainNodeRpcUrl: "https://rpc.ab.testnet.adifoundation.ai"

cloudflared:
  # -- Replay endpoint hostname
  replayHostname: "replay.ab.testnet.adifoundation.ai"

# Disable proof-sync for testnet (mainnet uses https://adimainnet.blob.core.windows.net/proofs)
proofSync:
  storageUrl: "https://adiproofs.blob.core.windows.net/shared"

# Ingress configuration
# Ingress controller overlays (pick one):
#   -f values-ingress-contour.yaml (Gateway API - recommended)
#   -f values-cloud-aws.yaml (ALB)
#   -f values-cloud-gke.yaml (GCE)
#   -f values-cloud-azure.yaml (App Gateway)
# TLS via cert-manager:
#   -f values-tls-certmanager.yaml
ingress:
  enabled: true
  type: auto
  hostname: testnet.adi-atk.settlemint.com
  path: /
  pathType: Prefix
  tls:
    enabled: true
    secretName: "" # Let cert-manager create it, or specify existing secret
